window.__require=function e(n,t,o){function c(a,s){if(!t[a]){if(!n[a]){var r=a.split("/");if(r=r[r.length-1],!n[r]){var h="function"==typeof __require&&__require;if(!s&&h)return h(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var m=t[a]={exports:{}};n[a][0].call(m.exports,function(e){return c(n[a][1][e]||e)},m,m.exports,e,n,t,o)}return t[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)c(o[a]);return c}({"brick-move":[function(e,n,t){"use strict";cc._RF.push(n,"056d9JDWjVPPYagfzGfv2SC","brick-move"),cc.Class({extends:cc.Component,properties:{nickname:""},start:function(){this.rigidBody=this.getComponent(cc.RigidBody),this.rigidBody.gravityScale=0,GameEvent.on(GameEventType.BRICK_MOVE_X,this.moveX,this),GameEvent.on(GameEventType.BRICK_MOVE_FINISH,this.moveFinish,this),GameEvent.on(GameEventType.BRICK_TURN,this.turn,this),GameEvent.on(GameEventType.BRICK_DESTROY,this.playDestroy,this),this.playStart()},update:function(){this.node.y<-Canvas.height/2&&GameEvent.emit(GameEventType.BRICK_RING_OUT)},moveX:function(e){this.node.x+=e,this.node.x>Canvas.width/2&&(this.node.x=Canvas.width/2),this.node.x<-Canvas.width/2&&(this.node.x=-Canvas.width/2)},moveFinish:function(){var e=this;this.rigidBody.gravityScale=1,GameEvent.off(GameEventType.BRICK_MOVE_X,this.moveX,this),GameEvent.off(GameEventType.BRICK_MOVE_FINISH,this.moveFinish,this),GameEvent.off(GameEventType.BRICK_TURN,this.turn,this),this.schedule(function(){e.node.y<-Canvas.height/2&&(GameEvent.emit(GameEventType.BRICK_RING_OUT),console.log("ring out"))},1),this.node.opacity=180},turn:function(){this.node.rotation=(this.node.rotation+45)%360},playStart:function(){var e=this,n=this.node.scale;this.node.scale=0,this.node.rotation=0,cc.tween(this.node).to(.75,{scale:n,rotation:360}).call(function(){e.node.rotation=0}).start()},playDestroy:function(){var e=this;cc.tween(this.node).to(.75,{scale:0,rotation:720}).call(function(){e.node.destroy()}).start()}}),cc._RF.pop()},{}],"camera-move":[function(e,n,t){"use strict";cc._RF.push(n,"ed1b7zBBOhHopYTOQxnqLpP","camera-move"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],"change-btn":[function(e,n,t){"use strict";cc._RF.push(n,"dd42d4YuyxIJpQWEPxTFuIu","change-btn"),cc.Class({extends:cc.Component,properties:{},start:function(){var e=this;this.count=10,this.label=this.node.children[0].children[0].getComponent(cc.Label),this.label.string="change-".concat(this.count),this.button=this.node.getComponent(cc.Button),this.button.interactable=this.count>0,GameEvent.on(GameEventType.GAME_START,function(){e.count=10,e.node.on("click",e.handleClick,e)}),GameEvent.on(GameEventType.GAME_OVER,function(){e.node.off("click",e.handleClick,e)})},handleClick:function(){this.count&&(this.count--,this.label.string="change-".concat(this.count),this.button.interactable=this.count>0,GameEvent.emit(GameEventType.BRICK_CHANGE))}}),cc._RF.pop()},{}],"cloud-move":[function(e,n,t){"use strict";cc._RF.push(n,"5fec5y2D/5AaKsiJXgT6ovr","cloud-move"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.speed=.5,console.log("canvas w: "+Canvas.width),console.log("node w: "+this.node.width)},update:function(){this.node.x-=this.speed;var e=this.node.getBoundingBox();this.node.x<-Canvas.width/2-e.width/2&&(this.node.x=Canvas.width/2+e.width/2)}}),cc._RF.pop()},{}],"game-brick":[function(e,n,t){"use strict";cc._RF.push(n,"af7bfEnHRdJiItz2EWhNs3Z","game-brick"),cc.Class({extends:cc.Component,properties:{bricks:[cc.Node]},onLoad:function(){var e=this;this.waiting=!1,this.over=!1,this.brick=null,this.bricks.length||console.error("No template brick"),GameEvent.on(GameEventType.GAME_START,function(){e.over=!1,e.waiting=!1,e.createBrick(),GameEvent.once(GameEventType.BRICK_RING_OUT,function(){e.over=!0,GameEvent.emit(GameEventType.GAME_OVER)})}),GameEvent.on(GameEventType.GAME_NEXT,function(){e.createBrick()}),GameEvent.on(GameEventType.BRICK_CHANGE,function(){e.changeBrick()}),GameEvent.on(GameEventType.BRICK_MOVE_FINISH,function(){e.waiting||(e.waiting=!0,e.scheduleOnce(function(){e.over||(GameEvent.emit(GameEventType.GAME_NEXT),e.waiting=!1)},2))})},createBrick:function(){var e=Math.floor(Math.random()*this.bricks.length),n=this.bricks[e],t=cc.find("Canvas/Brick"),o=cc.instantiate(n);o.parent=t,o.scale=1+2*Math.random(),o.active=!0,o.x=0,o.y=Camera.y+Camera.width/2*.7;var c=o.getComponent("brick-move").nickname;GameEvent.emit(GameEventType.BRICK_NAME_UPDATE,c),o.getComponent(cc.PhysicsPolygonCollider).density=.7,this.brick=o},changeBrick:function(){this.brick.destroy(),this.createBrick()}}),cc._RF.pop()},{}],"game-event":[function(e,n,t){"use strict";cc._RF.push(n,"552edbvrpVER5RvWZLiLzDQ","game-event"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){window.GameEvent=new cc.EventTarget,window.GameEventType={BRICK_MOVE_X:"BRICK_MOVE_X",BRICK_MOVE_FINISH:"BRICK_MOVE_FINISH",BRICK_TURN:"BRICK_TURN",BRICK_CHANGE:"BRICK_CHANGE",BRICK_NAME_UPDATE:"BRICK_NAME_UPDATE",BRICK_RING_OUT:"BRICK_RING_OUT",BRICK_DESTROY:"BRICK_DESTROY",GAME_START:"GAME_START",GAME_NEXT:"GAME_NEXT",GAME_OVER:"GAME_OVER"},window.NodeEventType={}},start:function(){this.scheduleOnce(function(){GameEvent.emit(GameEventType.GAME_START)},1)}}),cc._RF.pop()},{}],"game-init":[function(e,n,t){"use strict";cc._RF.push(n,"11767WJlUZIn6qDoGrUcSqs","game-init"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){window.Canvas=cc.find("Canvas"),window.Camera=cc.find("Canvas/Main Camera")}}),cc._RF.pop()},{}],"game-physic":[function(e,n,t){"use strict";cc._RF.push(n,"19f78Z9wjpAd7Y8wBnxAFae","game-physic"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-1e3)}}),cc._RF.pop()},{}],"gameover-show":[function(e,n,t){"use strict";cc._RF.push(n,"139b4Hid/NID7xz4LmzXFE8","gameover-show"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.opacity=0,GameEvent.on(GameEventType.GAME_OVER,function(){e.show()}),GameEvent.on(GameEventType.GAME_START,function(){e.hide()})},show:function(){this.node.opacity=255},hide:function(){this.node.opacity=0}}),cc._RF.pop()},{}],"name-show":[function(e,n,t){"use strict";cc._RF.push(n,"9b28awMD1pHraROngT5URjW","name-show"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this.getComponent(cc.Label);GameEvent.on(GameEventType.BRICK_NAME_UPDATE,function(n){e.string=n})}}),cc._RF.pop()},{}],"score-show":[function(e,n,t){"use strict";cc._RF.push(n,"c9f76qwJ5lOcJ6r0t4Ahfl6","score-show"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.score=0,GameEvent.on(GameEventType.GAME_START,function(){e.setScore(1)}),GameEvent.on(GameEventType.GAME_NEXT,function(){e.addScore(1)})},setScore:function(e){this.score=e,this.getComponent(cc.Label).string=this.score},addScore:function(e){this.score+=e,this.getComponent(cc.Label).string=this.score}}),cc._RF.pop()},{}],"touch-move":[function(e,n,t){"use strict";cc._RF.push(n,"b3f30onTLRMvJNZVHv1ssSn","touch-move"),cc.Class({extends:cc.Component,properties:{},start:function(){var e=this;GameEvent.on(GameEventType.GAME_START,function(){e.node.off(cc.Node.EventType.TOUCH_END,e.handleGameOverTouchEnd,e),e.node.on(cc.Node.EventType.TOUCH_MOVE,e.handleGameStartTouchMove,e),e.node.on(cc.Node.EventType.TOUCH_END,e.handleGameStartTouchEnd,e)}),GameEvent.on(GameEventType.GAME_OVER,function(){e.node.off(cc.Node.EventType.TOUCH_MOVE,e.handleGameStartTouchMove,e),e.node.off(cc.Node.EventType.TOUCH_END,e.handleGameStartTouchEnd,e),e.node.on(cc.Node.EventType.TOUCH_END,e.handleGameOverTouchEnd,e),cc.director.pause()})},handleGameStartTouchMove:function(e){var n=e.getDelta();GameEvent.emit(GameEventType.BRICK_MOVE_X,n.x)},handleGameStartTouchEnd:function(e){GameEvent.emit(GameEventType.BRICK_MOVE_FINISH)},handleGameOverTouchEnd:function(e){cc.director.resume(),GameEvent.emit(GameEventType.BRICK_DESTROY),this.scheduleOnce(function(){GameEvent.emit(GameEventType.GAME_START)},1)}}),cc._RF.pop()},{}],"turn-btn":[function(e,n,t){"use strict";cc._RF.push(n,"382a4VLtn9Mx644nv31OWdc","turn-btn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;GameEvent.on(GameEventType.GAME_START,function(){e.node.on("click",e.handleClick,e)}),GameEvent.on(GameEventType.GAME_OVER,function(){e.node.off("click",e.handleClick,e)})},handleClick:function(){GameEvent.emit(GameEventType.BRICK_TURN)}}),cc._RF.pop()},{}]},{},["brick-move","camera-move","change-btn","cloud-move","game-brick","game-event","game-init","game-physic","gameover-show","name-show","score-show","touch-move","turn-btn"]);